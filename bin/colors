#!/bin/bash

# dirty command-line script to show color palettes

echo "Which color scheme?"
PS3="> "
select scheme in "xterm-256" "tmux" "hexadecimal"; do
   case $scheme in
      xterm-256 ) xterm; break;;
      tmux ) tmuxcolors; break;;
      hexadecimal ) hexme; break;;
      * ) echo "That's not an option, dickhead."; break;;
   esac
done


color(){
  for c; do
    printf '\e[48;5;%dm%03d' $c $c
  done
  printf '\e[0m \n'
}

function xterm {
  IFS=$' \t\n'
  color {0..15}
  for ((i=0;i<6;i++)); do
    color $(seq $((i*36+16)) $((i*36+51)))
  done
  color {232..255}
}

tohex(){
    dec=$(($1%256))   ### input must be a number in range 0-255.
    if [ "$dec" -lt "16" ]; then
        bas=$(( dec%16 ))
        mul=128
        [ "$bas" -eq "7" ] && mul=192
        [ "$bas" -eq "8" ] && bas=7
        [ "$bas" -gt "8" ] && mul=255
        a="$((  (bas&1)    *mul ))"
        b="$(( ((bas&2)>>1)*mul ))" 
        c="$(( ((bas&4)>>2)*mul ))"
        printf 'dec= %3s basic= #%02x%02x%02x\n' "$dec" "$a" "$b" "$c"
    elif [ "$dec" -gt 15 ] && [ "$dec" -lt 232 ]; then
        b=$(( (dec-16)%6  )); b=$(( b==0?0: b*40 + 55 ))
        g=$(( (dec-16)/6%6)); g=$(( g==0?0: g*40 + 55 ))
        r=$(( (dec-16)/36 )); r=$(( r==0?0: r*40 + 55 ))
        printf 'dec= %3s color= #%02x%02x%02x\n' "$dec" "$r" "$g" "$b"
    else
        gray=$(( (dec-232)*10+8 ))
        printf 'dec= %3s  gray= #%02x%02x%02x\n' "$dec" "$gray" "$gray" "$gray"
    fi
}

hexadec(){
  for i in $(seq 0 255); do
      tohex ${i}
  done
}

hexme(){
  printf "Enter the number:\n$PS3"
  read input_color
  echo -e "$(tput setab $input_color)   $(tohex $input_color)   $(tput setab 0)\n"
}

tmuxcolors(){
  for i in 00{1..9} 0{10..99} {100..255} ; do
    printf "\x1b[38;5;${i}mcolour${i} "
  done
  printf "\n"
}
